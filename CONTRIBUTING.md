## Questions

Please don't ask your questions in issues. Instead, use one of the following ways to ask:

- Ask on our telegram group: [@marzneshins](https://t.me/marzneshins)
- Ask on our [GitHub Discussions](https://github.com/khodedawsh/marzneshin/discussions) for long term discussion or
  larger questions.

## Reporting issues

Include the following information in your post:

- Describe what you expected to happen.
- Describe what actually happened. Include server logs or any error that browser shows.
- If possible, post your xray json config file and what you have set in env (by censoring critical information).
- Also tell the version of Marzneshin, Xray and docker (if you use docker) you are using.

# Submitting a Pull Request

If there is not an open issue for what you want to submit, prefer opening one for discussion before working on a PR. You
can work on any issue that doesn't have an open PR linked to it or a maintainer assigned to it. These show up in the
sidebar. No need to ask if you can work on an issue that interests you.

## Branches

Make sure to create a branch off your master branch, and then submit a PR to our master branch.

## Project Structure

```
.
├── app                      # Backend code (FastAPI - Python)
├── dashboard                # Frontend code (React - Typescript)
└── cli                      # CLI code (Typer - Python)
```

## Backend

Backend is built using FastAPI and uses SQLAlchemy as the ORM for database operations. Pydantic models can be found
in the `app/models` directory, while all database-related operations and models are in the `app/db` directory. The
migration scripts for the database (Alembic) can be found in the `app/db/migrations` directory.

### Python Code Formatting

To maintain consistency in the codebase, we require all code to be formatted using

```bash
black .
```

## Frontend

To build the frontend you'll need the following dependencies:

- npm
- pnpm

then run `make dashboard-deps && make dashboard build` for it to build; or `make dashboard-dev` for development
purposes.

## Marzneshin CLI

Marzneshin CLI is built using [Typer](https://typer.tiangolo.com/), and its commands' code can be found in `cli`
directory. Its documentation is generated using [Typer CLI](https://typer.tiangolo.com/typer-cli/) which can be
re-generated by navigating to project's root directory and running the following command:

```bash
$ PYTHONPATH=$(pwd) typer marzneshin-cli.py utils docs --name "marzneshin-cli" --output ./cli/README.md
```

## Dev Mode

To run the frontend in development mode use the following commands to install the dependencies, and then run the
backend:

```bash
make dashboard-deps && make dashboard-dev
```

run `make start` in another console.
